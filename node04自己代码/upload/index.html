<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <input type="file" class="inputFile" />
  </body>
  <script>
    //拿到所有的文件框
    window.onload = function () {
      var files = document.getElementsByTagName('input'),
        len = files.length,
        file
      for (var i = 0; i < len; i++) {
        file = files[i]
        if (file.type !== 'file') continue // 不是文件类型的控件跳过
        file.onchange = function () {
          var _files = this.files
          console.log('_files', _files)
          console.log('files', files)
          if (!_files.length) return
          if (_files.length === 1) {
            // 选择单个文件
            var xhr = new XMLHttpRequest()
            xhr.open('POST', 'http://localhost:3000/upload')
            var filePath = _files[0].name
            console.log('filePath', filePath)

            xhr.setRequestHeader('file-name', filePath)
            xhr.send(_files[0])
          } else {
          }
        }
      }
    }
  </script>
</html>
